{% extends "base.html" %}

{% block content %} 
<div class="login_form">
    <div class="text-left">
        <legend class="border-bottom mb-4">Add Policy</legend>
        <form action="" method="post" novalidate>
            {{ form.hidden_tag() }}
        <div class="input-group mb-4 input-group-md">
            <div class="input-group-prepend">
                <span class="input-group-text">Choose Operation</span>
            </div>
            <SELECT name = "operation_id">
                <OPTION selected disabled hidden>Choose</OPTION>
                {% for operation in operations %}
                    <OPTION value = "{{ operation.operation_id }}"> {{ operation.operation_name }} </OPTION>
                {% endfor %}
            </SELECT>
        </div>
    <div class="card text-left">
        <div class="card-body">
            <table class="table table-hover table-striped table-responsive table-bordered"> 
                <tr> <td> User attribute </td> <td> Value </td> </tr>
                {% for aval_form in form.user_aval %} 
                <tr><fieldset class="form-group">
                    <td><div class="input-group mb-4 input-group-md">
                        {{ aval_form.attribute(class_="form-control",size=64, placeholder="Attribute") }}
                        <div class="invalid-feedback">
                {% for error in aval_form.attribute.errors %} <span style="color:red;">[{{error}}]</span> {% endfor %}
                        </div>
                    </div></td>
                    <td><div class="input-group mb-4 input-group-md">
                        {{ aval_form.val(class_="form-control",size=64, placeholder="Value") }}
                        <div class="invalid-feedback">
                {% for error in aval_form.val.errors %}  <span style="color:red;">[{{error}}]</span> {% endfor %}
                        </div>
                    </div></td>
                </fieldset></tr>
                {% endfor %}
            </table>
            <table class="table table-hover table-striped table-responsive "> 
                <tr>{{ form.add_user_aval(class="btn btn-outline-info") }}</tr>
            </table>
            <table class="table table-hover table-striped table-responsive table-bordered"> 
                <tr> <td> Resource attribute </td> <td> Value </td> </tr>
                {% for aval_form in form.resource_aval %} 
                <tr><fieldset class="form-group">
                    <td><div class="input-group mb-4 input-group-md">
                        {{ aval_form.attribute(class_="form-control",size=64, placeholder="Attribute") }}
                        <div class="invalid-feedback">
                {% for error in aval_form.attribute.errors %} <span style="color:red;">[{{error}}]</span> {% endfor %}
                        </div>
                    </div></td>
                    <td><div class="input-group mb-4 input-group-md">
                        {{ aval_form.val(class_="form-control",size=64, placeholder="Value") }}
                        <div class="invalid-feedback">
                {% for error in aval_form.val.errors %}  <span style="color:red;">[{{error}}]</span> {% endfor %}
                        </div>
                    </div></td>
                </fieldset></tr>
                {% endfor %}
            </table>
            <table class="table table-hover table-striped table-responsive "> 
                <tr>{{ form.add_resource_aval(class="btn btn-outline-info") }}</tr>
            </table>
            <table class="table table-hover table-striped table-responsive table-bordered"> 
                <tr> <td> Env attribute </td> <td> Value </td> </tr>
                {% for aval_form in form.env_aval %} 
                <tr><fieldset class="form-group">
                    <td><div class="input-group mb-4 input-group-md">
                        {{ aval_form.attribute(class_="form-control",size=64, placeholder="Attribute") }}
                        <div class="invalid-feedback">
                {% for error in aval_form.attribute.errors %} <span style="color:red;">[{{error}}]</span> {% endfor %}
                        </div>
                    </div></td>
                    <td><div class="input-group mb-4 input-group-md">
                        {{ aval_form.val(class_="form-control",size=64, placeholder="Value") }}
                        <div class="invalid-feedback">
                {% for error in aval_form.val.errors %}  <span style="color:red;">[{{error}}]</span> {% endfor %}
                        </div>
                    </div></td>
                </fieldset></tr>
                {% endfor %}
            </table>
            <table class="table table-hover table-striped table-responsive "> 
                <tr>{{ form.add_env_aval(class="btn btn-outline-info") }}</tr>
            </table>
        </div>
    </div>
        <br><br>
        <p>{{ form.submit(class="btn btn-outline-info", placeholder="Add Poliocy") }}</p>
        </form>
    </div>
</div>
{% endblock content %}